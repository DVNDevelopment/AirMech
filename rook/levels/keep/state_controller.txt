StateController Lvl_keep {
#include Lvl_CommonStates
State initial {
In 0.0 "sym setNSet 60 UpkeepTeam0_ -1"
In 0.0 "sym setNSet 60 UpkeepTeam1_ -1"
In 0.0 "sym set _UTInc_ 0"
}
State Init {
DoL 4.0 playsound AmbientBed1 /busId 2
DoL 25.0 gamemsg addf_u keep_1
DoL 28.0 gamemsg addf_u keep_2
DoL 32.0 gamemsg addf_u keep_3
DoL 35.0 gamemsg addf_u keep_4
DoL 40.0 gamemsg addf_u keep_5
DoL 43.0 gamemsg addf_u keep_6
DoL 46.0 gamemsg addf_u keep_7
DoL 52.0 gamemsg addf_u keep_8
DoL 100.0 gamemsg addf_u keep_9
DoL 106.0 gamemsg addf_u keep_10
DoL 53.0 sym set CSWave Wave1
DoL 0.0 sym set WaveMax 9
DoL 0.0 sym set CSWaveCount 0
DoL 0.0 sym set S_DCount 0
DoL 0.0 rook powerGenMod set 0
DoL 0.0 sym set spawnloc_center -60.383854 59.957573 -0.000015
DoL 0.0 sym set spawnloc_left 27.913593 79.979317 0.003464
DoL 0.0 sym set spawnloc_right -79.313011 -28.200832 0.003464
DoL 90.0 pfx worldspawn KeepCloud /pos 42.700592 84.974014 18
DoL 93.0 pfx worldspawn KeepCloud /pos 89.700592 3.974014 18
DoL 100.0 pfx worldspawn KeepCloud /pos 23.700592 -22.974014 18
}
State Tick {
Do 0.0 "rook doLevelState $$CSWave"
Do 0.0 "rook doLevelState TickCreeps"
Do 0.0 "rook doLevelState BlockCheck"
DoL 0.0 if sym MatchOver == 0 rook doLevelState UpkeepTrack
}
State TickCreeps {
Cfg timeBlock 0.25
Do 0.0 "rook doLevelState NormalSpawn"
}
State BlockCheck {
Cfg timeBlock 1.0
Do 0.0 "rook survivalBlockCheck 240"
}
State NormalSpawn {
DoL 0.0 if gameValidation spCr_p0 rook doLevelState CreepSpawnTeam0
}
State CreepSpawnTeam0 {
DoL 0.0 |rook spawnCreepBegin 0
DoL 1.0 |rook spawnCreep 0
DoL 1.5 |rook spawnCreep 0
DoL 2.0 |rook spawnCreep 0
DoL 5.0 |rook spawnCreepEnd 0
}
State WaveWaitingDummy {
Cfg timeBlock 20.0
}
State WaveCompleteCommon {
DoL 0.0 sym set CSWave $_SArg1_
DoL 0.0 sym append CSWave Wait
#if arc
DoL 0.0 |gamemsg addf_u SrvWaveCompleted
DoL 3.0 |gamemsg addf_u SrvMorePower
DoL 6.0 |gamemsg addf_u SrvNextWave
#else
DoL 0.0 |gamemsg addf_u survival_10
DoL 9.0 |gamemsg addf_u survival_11
#endif
DoL 3.0 |rook powerGenMod inc 8
DoL 9.0 |sym set S_DCount 0
DoL 9.0 |sym set CSWaveCount 0
DoL 9.0 |floatSym set waveProgress 1.0
DoL 9.0 |sym set CSWave $_SArg1_
}
State Wave1 {
Cfg timeBlock 3.0
DoL 0.0 sym set S_Wave 1
DoL 0.0 sym set S_Total /9
DoL 0.0 sym inc CSWaveCount
DoL 0.0 if sym CSWaveCount <= 1 rook doLevelState Wave1Spawn
DoL 0.0 if sym S_DCount >= 9 rook doLevelState Wave1Complete
}
State Wave1Spawn {
DoL 0.0 spawn APC /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_right
DoL 0.5 spawn APC /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_left
DoL 1.0 spawn APC /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount"  /pos $spawnloc_right
DoL 1.5 spawn Tank /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_left
DoL 2.0 spawn Tank /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_center
DoL 4.5 spawn TankMonster /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount"  /pos $spawnloc_center
DoL 5.0 spawn TankMonster /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_center
DoL 5.5 spawn SupplyTank /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_center
DoL 6.0 spawn SupplyTank /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount"  /pos $spawnloc_center
}
State Wave1Complete {
Cfg timeBlock 200.0
DoL 0.0 rook doLevelState WaveCompleteCommon Wave2
}
State Wave2 {
Cfg timeBlock 3.0
DoL 0.0 sym set S_Wave 2
DoL 0.0 sym set S_Total /27
DoL 0.0 sym inc CSWaveCount
DoL 0.0 if sym CSWaveCount <= 3 rook doLevelState Wave2Spawn
DoL 0.0 if sym S_DCount >= 27 rook doLevelState Wave2Complete
}
State Wave2Spawn {
DoL 0.0 spawn InfantryJetpack /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_right
DoL 0.5 spawn InfantryJetpack /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_right
DoL 1.0 spawn InfantryButcher /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount"  /pos $spawnloc_right
DoL 1.5 spawn InfantryButcher /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_left
DoL 3.0 spawn InfantryButcher /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_left
DoL 3.5 spawn InfantryJetpack /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount"  /pos $spawnloc_left
DoL 5.0 spawn InfantryJetpack /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_center
DoL 5.5 spawn InfantryJetpack /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_center
DoL 7.0 spawn InfantryJetpack /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount"  /pos $spawnloc_center
}
State Wave2Complete {
Cfg timeBlock 200.0
DoL 0.0 rook doLevelState WaveCompleteCommon Wave3
}
State Wave3 {
Cfg timeBlock 3.0
DoL 0.0 sym set S_Wave 3
DoL 0.0 sym set S_Total /18
DoL 0.0 sym inc CSWaveCount
DoL 0.0 if sym CSWaveCount <= 2 rook doLevelState Wave3Spawn
DoL 0.0 if sym S_DCount >= 18 rook doLevelState Wave3Complete
}
State Wave3Spawn {
DoL 0.0 spawn GruntShield /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_right
DoL 3.5 spawn GruntShield /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_right
DoL 6.0 spawn GruntShield /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount"  /pos $spawnloc_right
DoL 8.5 spawn GruntSwords /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_left
DoL 12.0 spawn GruntSwords /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_left
DoL 15.5 spawn GruntSwords /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount"  /pos $spawnloc_left
DoL 17.0 spawn Tank /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_center
DoL 20.5 spawn Tank /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_center
DoL 25.0 spawn Tank /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount"  /pos $spawnloc_center
}
State Wave3Complete {
Cfg timeBlock 200.0
DoL 0.0 rook doLevelState WaveCompleteCommon Wave4
}
State Wave4 {
Cfg timeBlock 6.0
DoL 0.0 sym set S_Wave 4
DoL 0.0 sym set S_Total /54
DoL 0.0 sym inc CSWaveCount
DoL 0.0 if sym CSWaveCount <= 6 rook doLevelState Wave4Spawn
DoL 0.0 if sym S_DCount >= 54 rook doLevelState Wave4Complete
}
State Wave4Spawn {
DoL 0.0 spawn RocketTruckU /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_left
DoL 5.0 spawn RocketTruckU /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_left
DoL 1.0 spawn RocketTruckU /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount"  /pos $spawnloc_center
DoL 15.0 spawn TankMonster /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_left
DoL 20.0 spawn RocketTruckU /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_left
DoL 16.0 spawn RocketTruckU /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount"  /pos $spawnloc_left
DoL 25.0 spawn SupplyTruck /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_center
DoL 30.5 spawn RocketTruckU /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_center
DoL 26.0 spawn RocketTruckU /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount"  /pos $spawnloc_center
}
State Wave4Complete {
Cfg timeBlock 200.0
DoL 0.0 rook doLevelState WaveCompleteCommon Wave5
DoL 16.0 gamemsg addf_u keep_11
DoL 19.0 gamemsg addf_u keep_12
}
State Wave5 {
Cfg timeBlock 3.0
DoL 0.0 sym set S_Wave 5
DoL 0.0 sym set S_Total /140
DoL 0.0 sym inc CSWaveCount
DoL 0.0 if sym CSWaveCount <= 5 rook doLevelState Wave5Spawn
DoL 0.0 if sym S_DCount >= 140 rook doLevelState Wave5Complete
}
State Wave5Spawn {
DoL 0.0 spawn InfantryJetpack /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_right
DoL 0.5 spawn InfantryJetpack /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_right
DoL 1.0 spawn InfantryJetpack /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount"  /pos $spawnloc_right
DoL 1.5 spawn InfantryJetpack /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_right
DoL 2.0 spawn InfantryJetpack /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_right
DoL 4.5 spawn InfantryJetpack /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount"  /pos $spawnloc_right
DoL 5.0 spawn InfantryJetpack /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_right
DoL 5.5 spawn InfantryJetpack /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_right
DoL 6.0 spawn TankHeavyU /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount"  /pos $spawnloc_right
DoL 7.0 spawn InfantryJetpack /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_center
DoL 8.5 spawn InfantryJetpack /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_center
DoL 9.0 spawn InfantryJetpack /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount"  /pos $spawnloc_center
DoL 11.5 spawn InfantryJetpack /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_center
DoL 12.0 spawn InfantryJetpack /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_center
DoL 14.5 spawn InfantryJetpack /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount"  /pos $spawnloc_center
DoL 15.0 spawn InfantryJetpack /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_center
DoL 15.5 spawn InfantryPyro /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_center
DoL 16.0 spawn InfantryPyro /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount"  /pos $spawnloc_center
DoL 20.0 spawn InfantryPyro /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_left
DoL 20.5 spawn InfantryPyro /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_left
DoL 21.0 spawn InfantryPyro /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount"  /pos $spawnloc_left
DoL 21.5 spawn InfantryPyro /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_left
DoL 22.0 spawn InfantryPyro /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_left
DoL 24.5 spawn InfantryPyro /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount"  /pos $spawnloc_left
DoL 25.0 spawn InfantryJetpack /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_left
DoL 25.5 spawn InfantryJetpack /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_left
DoL 26.0 spawn InfantryJetpack /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount"  /pos $spawnloc_left
DoL 30.0 spawn InfantryJetpack /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_right
}
State Wave5Complete {
Cfg timeBlock 200.0
DoL 0.0 rook doLevelState WaveCompleteCommon Wave6
DoL 12.0 gamemsg addf_u keep_13
DoL 16.0 gamemsg addf_u keep_14
DoL 19.0 gamemsg addf_u keep_15
DoL 23.0 gamemsg addf_u keep_16
}
State Wave6 {
Cfg timeBlock 5.0
DoL 0.0 sym set S_Wave 6
DoL 0.0 sym set S_Total /27
DoL 0.0 sym inc CSWaveCount
DoL 0.0 if sym CSWaveCount <= 3 rook doLevelState Wave6Spawn
DoL 0.0 if sym S_DCount >= 27 rook doLevelState Wave6Complete
}
State Wave6Spawn {
DoL 0.0 spawn DroneBomber /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_right
DoL 5.5 spawn DroneBomber /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_right
DoL 7.0 spawn DroneBomber /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount"  /pos $spawnloc_right
DoL 9.5 spawn DroneBomber /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_left
DoL 12.0 spawn DroneBomber /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_left
DoL 14.5 spawn DroneBomber /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount"  /pos $spawnloc_left
DoL 17.0 spawn DroneBomber /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_center
DoL 22.5 spawn DroneBomber /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_center
DoL 26.0 spawn DroneBomber /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount"  /pos $spawnloc_center
}
State Wave6Complete {
Cfg timeBlock 200.0
DoL 0.0 rook doLevelState WaveCompleteCommon Wave7
DoL 4.0 playsound AmbientBed1 /busId 2
}
State Wave7 {
Cfg timeBlock 5.0
DoL 0.0 sym set S_Wave 7
DoL 0.0 sym set S_Total /54
DoL 0.0 sym inc CSWaveCount
DoL 0.0 if sym CSWaveCount <= 6 rook doLevelState Wave7Spawn
DoL 0.0 if sym S_DCount >= 54 rook doLevelState Wave7Complete
}
State Wave7Spawn {
DoL 0.0 spawn TankMonster /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_right
DoL 1.5 spawn InfantryPyro /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_right
DoL 3.0 spawn RocketTruckU /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount"  /pos $spawnloc_right
DoL 5.5 spawn RocketTruckU /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_right
DoL 7.0 spawn RocketTruckU /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_center
DoL 8.5 spawn RocketTruckU /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount"  /pos $spawnloc_center
DoL 10.0 spawn RocketTruckU /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_center
DoL 15.5 spawn RocketTruckU /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_center
DoL 16.0 spawn RocketTruckU /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount"  /pos $spawnloc_center
}
State Wave7Complete {
Cfg timeBlock 200.0
DoL 0.0 rook doLevelState WaveCompleteCommon Wave8
DoL 4.0 playsound AmbientBed1 /busId 2
DoL 12.0 gamemsg addf_u keep_17
DoL 20.0 gamemsg addf_u keep_18
DoL 23.0 gamemsg addf_u keep_19
}
State Wave8 {
Cfg timeBlock 4.0
DoL 0.0 sym set S_Wave 8
DoL 0.0 sym set S_Total /18
DoL 0.0 sym inc CSWaveCount
DoL 0.0 if sym CSWaveCount <= 2 rook doLevelState Wave8Spawn
DoL 0.0 if sym S_DCount >= 18 rook doLevelState Wave8Complete
}
State Wave8Spawn {
DoL 0.0 spawn TankHeavyVoid /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_left
DoL 1.5 spawn TankHeavyVoid /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_right
DoL 3.0 spawn TankHeavyVoid /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount"  /pos $spawnloc_right
DoL 5.5 spawn TankHeavyVoid /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_left
DoL 7.0 spawn TankHeavyVoid /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_center
DoL 8.5 spawn TankHeavyVoid /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount"  /pos $spawnloc_center
DoL 10.0 spawn TankHeavyVoid /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_center
DoL 15.5 spawn TankHeavyVoid /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount" /pos $spawnloc_center
DoL 16.0 spawn TankHeavyVoid /team 6 /data ". team 6" /data ". order CaptureOutpost" /data ". dInc S_DCount"  /pos $spawnloc_center
}
State Wave8Complete {
Cfg timeBlock 200.0
DoL 0.0 sym set CSWave Wave9
DoL 6.0 gamemsg addf_u keep_20
DoL 9.0 gamemsg addf_u keep_21
DoL 12.5 state doLevelAction victory
}
}
